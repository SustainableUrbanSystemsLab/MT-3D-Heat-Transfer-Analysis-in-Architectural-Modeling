\chapter{Heat Transfer in Buildings}



The capabilities of current software packages are specific to remodeling one wall or section in separate software, rather than integrating it into the design process using design software packages. Examples of current 2D heat transfer software are THERM and HTFlux where
the user is required to remodel walls, sections, or entire buildings, depending on the scale of the project and the number of design changes involved.

Traditional building design processes often rely on simplified 2D heat transfer models, which fail to capture the precise thermal interactions that occur in the real world. This limitation affects the accuracy of performance predictions and affects the identification of optimal design solutions for energy efficiency. 
3D simulations offer a more realistic representation of thermal transfer, accounting for both conduction and convection. 
Moreover, they hold massive potential for cost reduction and carbon emission mitigation. 


%The impact of this research is significant on energy efficiency, reduced operational carbon, and possibly reduced embodied carbon by adding the climate zone, and the tool will provide recommendations.

%\clearpage



\section{Literature Review}





%\section{Literature Review}
%We conducted a qualitative literature review to understand the current potential of 3D heat transfer software for architects. 
% First, a review was made to understand the capabilities of $HTflux$ and $THERM$ \cite{THERM}, which are the main heat transfer software for modelers. 

% HTFlux
Current tools are limited to 2D heat transfer, such as \textit{HTflux} \cite{HTflux}, which is specialized software for simulations of two-dimensional heat and water vapor transport. \todo{add table of figure that shows overview of all tools you found: HTflux, Therm, etc.}
It uses the 2D Glaser method \cite{glaser1959graphisches} to calculate dew points, condensation, and evaporation in 2D structures. 
The software offers an easy-to-use interface, can import CAD geometries, and employs a direct mapping method for accurate simulations. 
It provides various thermal analysis metrics (heat flow, U-value, $\psi$-value, etc.) and measures extreme temperature values. Two contributions stand out that discuss different 3D heat transfer elements and approaches by  \cite{Yang}, and \cite{COMSOL}, whereas one contribution presents 2D heat transfer using OpenFOAM \cite{kastner2020solving}.

\cite{kastner2020solving} presented a case study that presents a thermal bridge analysis and 2D heat transfer with OpenFOAM, which is similar to our approach due to the use of OF. The simulation is constructed from pre-processing, simulation, and post-processing. 
Based on the result of the used case, it is possible to use \textit{Rhino\ \&\ Grasshopper} to calculate architectural heat transfer in the pre- and post-processing phases, but this requires additional research to achieve this goal. 
The authors experimented with a validation case retrieved from \textit{HTflux} that was originally published in the ISO guide \cite{kastner2020solving,ISO}. 

The second approach is found from \cite{Yang} which experimented with 3D heat transfer following a different method, which is to develop a mesh using lumped hexahedral elements and employs ray/triangle intersection techniques for an accurate geometric representation of the building. 
It applies an energy balance to each element and integrates a system of ordinary differential equations to obtain spatio-temporal indoor temperature and relative humidity fields. 
However, there are several limitations, such as not explicitly solving flow fields, which may limit its accuracy in capturing complex airflow patterns. 
Furthermore, idealized thermal conditions do not include real world conditions and do not accurately represent the impact of the thermal mass of the floor. 
\cite{Yang}. 


The third approach by \cite{COMSOL} used \textit{COMSOL / Multiphysics} to simulate heat transfer in buildings and has been validated. There were minor differences in the results due to the convective heat transfer coefficient. 
The main issues with the software are the cost and the need to use software that is not integrated in the design software.
However, the authors' work is valuable in terms of offering heat transfer simulation focusing on buildings.  %cost

The final research by Zhong et al., 2019 \cite{litrev2} is directly connected to this research workflow of investigating the computational fluid dynamics (CFD) simulation of convective heat transfer but specifically on Japanese vernacular architecture, focusing on "machiya" buildings. These traditional structures offer passive strategies for maintaining indoor comfort with minimal HVAC assistance. The study aims to validate and develop a methodology for simulating convective heat transfer using high-resolution 3D steady Reynolds-averaged Navierâ€“Stokes (RANS) CFD simulations. Through comparison and evaluation of different RANS models and boundary layer modeling approaches, the researchers identify suitable methods for predicting convective heat transfer coefficients (CHTC) and flow fields. Validation against wind-tunnel experiments on heated cubes in turbulent channel flow confirms the effectiveness of selected models and approaches. The study contributes to advancing simulation methodologies for sustainable building design but did not meet the objective of automating the heat transfer workflow to simplify it for the user \cite{litrev2}. 



\begin{table}[htb]
    \centering
    \caption[Heat Transfer Simulation Software]{Summary of heat transfer simulation software, highlighting type, overview, and limitations.}
    \label{tab:heat_transfer_software}
    \begin{tabular}{p{2cm}p{1cm}p{5.5cm}p{5.5cm}}    
        \toprule
        Software   & Type  & Overview  & Limitations  \\
        \midrule
        THERM      & 2D    & THERM uses a 2D analysis method for conduction and radiation heat transfer, employing the finite-element approach to simulate complex geometries.  & Limited to 2D, constraints on modeling complexity, require architects to download additional tools. \cite{THERM} \\
        
        HTFLUX     & 2D    & A 2D simulation for heat and water vapor transport, modeling heat and moisture movement and interaction.  & Limited to 2D, requires additional tool downloads. \cite{HTflux} \\
        
        ENERGY2D   & 2D    & An interactive multiphysics simulation program that models conduction, convection, and radiation.  & Limited to 2D, requires additional tool downloads. \cite{ener2d} \\
        
        HEAT2      & 2D    & A PC-based program designed for 2D transient and steady-state heat transfer.  & Limited to 2D, requires additional tool downloads. \cite{heat2} \\
        
        Kelvin     & 2D    & INTEGRATED's 2D/RS thermal analysis tool simulates temperature, heat flux, and temperature gradients through various visualization methods.  & Limited to 2D, requires additional tool downloads. \cite{kelvin} \\
        
        Quickfield & 3D    & Analyzes temperature distribution in static and transient heat transfer processes.  & Requires additional tool downloads, limited post-processing options. \cite{quickf} \\
        
        Simscale   & 3D    & Models heat transfer in solids through conduction and in fluids through convection.  & Cost-prohibitive, requires additional tool downloads, limited post-processing options. \cite{simscale} \\
        
        COMSOL     & 3D    & Simulates heat transfer by conduction, convection, and radiation.  & Cost-prohibitive, requires additional tool downloads, limited post-processing options. \cite{COMSOL} \\
        
        theseus    & 3D    & Uses the Finite Element Method (FEM) to solve both steady-state and transient analysis.  & Cost-prohibitive, requires additional tool downloads, limited post-processing options. \cite{thes} \\
        
        Physibel   & 3D    & Examines and improves the performance of entire buildings, with 2D/3D building components.  & Cost-prohibitive, requires additional tool downloads, limited post-processing options. \cite{phys} \\
        
        TAITHERM   & 3D    & Thermal simulation software that predicts temperatures using transient or steady-state analysis.  & Cost-prohibitive, requires additional tool downloads, limited post-processing options. \cite{taitherm} \\
        
        \bottomrule
    \end{tabular}
\end{table}






% Heim
%\citet{Heim2005} presented a two-solution method to simulate a dynamic heat transfer problem with phase change materials (PCM). The objectives of the paper are to provide a comparison between two solutions for specific and latent heat transfer through the building components, which are the effective heat capacity method and the additional heat source method. There are several differences between the two methods, such as, in the effective heat capacity method, the heat capacity is considered a function of the melting and solidification phase change. However, in the additional heat source method, the phase change depends on the temperature of the internal heat gain flux. The study is carried out around the embedded PCM in the building structure to add additional latent heat and increase the thermal capacity of the material. Both methods achieved the objective with a slight difference in the results. However, the author indicates that the numerical models used in the ESP-r require further validation and refinement.  


%\clearpage




\section{Heat Transfer Processes}


This thesis presents a simulation based on conductive and convective heat transfer. 
One may calculate conductive heat transfer using the heat diffusion equation \cite{bergman2011fundamentals}:
	
	\begin{equation} 
	\frac{\partial^2 T}{\partial x^2}+
	\frac{\partial^2 T}{\partial y^2}+
	\frac{\partial^2 T}{\partial z^2}+ 
	\frac{\dot{q}}{k}= \frac{1}{\alpha}\frac{\partial T}{\partial t} \text{, with } \alpha = \frac{k}{\rho c_p}\quad \\
	\end{equation}
	
	
Here, $x,y,$ and $z$ are the Cartesian coordinates, $\alpha$ is the thermal diffusivity, $\dot{q}$ is the energy generation rate per unit volume, and $c_p$ is the specific heat capacity.
 
To calculate convective heat transfer, the used formula accounts for both advection (the movement of heat with the fluid flow) and diffusion (the spatial variation of temperature): 

\begin{equation}
    \frac{\partial T}{\partial t} + \mathbf{v} \cdot \nabla T = \alpha \nabla^2 T + \frac{\dot{q}}{k},
\end{equation}

where $\mathbf{v}$ is the velocity vector of the fluid, $\alpha$ is the thermal diffusivity, $\nabla$ stands for the gradient operator, $\nabla^2$ represents the Laplacian operator, $\dot{q}$ is the energy generation rate per unit volume, and $k$ is the thermal conductivity \cite{bergman2011fundamentals}. This project utilizes the conjugate convective heat transfer approach which is the heat transfer of the combination of solids and fluids. Where the solids are solved by the steady-state Laplace equation and the fluid flow is solved by Navier-Stokes equations. Finally, the interfaces are matched to provide temperature distributions and heat flux \cite{Zhao2007}. Thus, performing 3D heat transfer in architectural applications is challenging and can't be solved by hand due to the complexity of the differential equations used.



\section{Computational Fluid Dynamics}
The approach this research follows uses OpenFOAM which stands for Open-source Field Operation and Manipulation and is a widely used open-source computational fluid dynamics  (CFD) software package that allows engineers and researchers to simulate fluid flow, heat transfer, and other related phenomena using numerical methods. The project uses CFD to calculate the heat flow gradient in the space. The selected OpenFOAM solver in this project is \textit{chtMultiRegionFoam} which is a solver capable of solving for steady or transient fluid flow with solid heat conduction and conjugate heat transfer between regions, buoyancy effects, turbulence, reactions, and radiation modeling\footnote{Not used in this study.} \cite{cht}. A detailed description of the solver can be found in Chapter 3.


